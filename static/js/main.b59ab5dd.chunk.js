(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(3),u=n.n(c),l=n(1),i=n(5),o=a.a.createContext({movies:[],modalClose:function(){},removeMovie:function(){},setMovie:function(){},setModal:function(){}}),m=(n(11),n(4)),s=n.n(m),f=function(e){return e.replace(/[0-9`~!@#$%^&*()_|+\-=?;:'",.<>\u201d\u201c\{\}\[\]\\\/]/gi,"").toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ").replace("  "," ")},b=function(e,t){t.current.innerHTML=e,t.current.style.display="block",t.current.style.opacity="1",setTimeout((function(){try{t.current.style.opacity="0",t.current.style.display="table-column-group"}catch(e){}}),4e3)},d=function(e,t,n){var r,a;return s.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(""!==t.title.current.value){c.next=4;break}return c.abrupt("return",{error:"Title can't be empty!"});case 4:if(n||!(e.filter((function(e){return e.Title===t.title.current.value})).length>0)){c.next=8;break}return c.abrupt("return",{error:"Movie with same title already exist!"});case 8:if(""!==t.year.current.value){c.next=12;break}return c.abrupt("return",{error:"Year can't be empty!"});case 12:if(!isNaN(t.year.current.value)){c.next=16;break}return c.abrupt("return",{error:"Year must be a number!"});case 16:if(""!==t.runtime.current.value){c.next=20;break}return c.abrupt("return",{error:"Runtime can't be empty!"});case 20:if(!isNaN(t.runtime.current.value)){c.next=24;break}return c.abrupt("return",{error:"Runtime must be a number!"});case 24:if(""!==t.genre.current.value){c.next=28;break}return c.abrupt("return",{error:"Genre can't be empty!"});case 28:if(""!==t.director.current.value){c.next=32;break}return c.abrupt("return",{error:"Director can't be empty!"});case 32:if(!n){c.next=43;break}return r=n.imdbID,(a=e.filter((function(e){return e.imdbID===r}))[0]).Title=f(t.title.current.value),a.Year=t.year.current.value,a.Runtime=t.runtime.current.value.replace("min","")+" min",a.Genre=t.genre.current.value,a.Director=t.director.current.value,c.abrupt("return",a);case 43:return c.abrupt("return",{imdbID:Math.random().toString(36).substring(7),Title:f(t.title.current.value),Year:t.year.current.value,Runtime:t.runtime.current.value.replace("min","")+" min",Genre:t.genre.current.value,Director:t.director.current.value});case 44:case"end":return c.stop()}}))},v=function(e,t){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"msg",ref:t.msg}),a.a.createElement("label",{htmlFor:"title"},"Title :"),a.a.createElement("input",{type:"text",defaultValue:e?e.Title:"",ref:t.title,id:"title"}),a.a.createElement("label",{htmlFor:"year"},"Year :"),a.a.createElement("input",{type:"text",defaultValue:e?e.Year:"",ref:t.year,id:"year"}),a.a.createElement("label",{htmlFor:"runtime"},"Runtime :"),a.a.createElement("input",{type:"text",defaultValue:e?e.Runtime:"",ref:t.runtime,id:"runtime"}),a.a.createElement("label",{htmlFor:"genre"},"Genre :"),a.a.createElement("input",{type:"text",defaultValue:e?e.Genre:"",ref:t.genre,id:"genre"}),a.a.createElement("label",{htmlFor:"director"},"Director :"),a.a.createElement("input",{type:"text",defaultValue:e?e.Director:"",ref:t.director,id:"director"}))},p=function(){var e=Object(r.useContext)(o),t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useRef)(),u=Object(r.useRef)(),l=Object(r.useRef)(),i=Object(r.useRef)(),m={msg:t,title:n,year:c,runtime:u,genre:l,director:i},s=function(n){var r=v(n,m),c=a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-small btn-danger-dark mr-1",onClick:function(){return function(t){var n='Are you sure, you want to delete "'.concat(t.Title,'" ?'),r=a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-small btn-primary mr-1",onClick:function(){return e.removeMovie(t.imdbID)}},"OK"),a.a.createElement("button",{className:"btn btn-small btn-danger",onClick:function(){return e.modalClose()}},"Cancel"));e.setModal(!0,n,r)}(n)}},"Delete"),a.a.createElement("button",{className:"btn btn-small btn-danger mr-1",onClick:function(){return e.modalClose()}},"Cancel"),a.a.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){var r;n?(r=n,d(e.movies,m,r).then((function(n){n.error?b(n.error,t):e.setMovie(n)}))):d(e.movies,m).then((function(n){n.error?b(n.error,t):(e.movies.push(n),e.setMovie(n))}))}},"Update"));e.setModal(!0,r,c)};return e.movies.map((function(e){return a.a.createElement("figure",{className:"movie-card",key:e.imdbID},a.a.createElement("div",{className:"movie-info"},a.a.createElement("div",{className:"movie-title"},e.Title," ",a.a.createElement("span",null," (",e.Year,")")),a.a.createElement("div",null,e.Runtime," | ",e.Genre),a.a.createElement("div",{className:"movie-director"},"Director: ",e.Director)),a.a.createElement("button",{className:"btn btn-small",onClick:function(){return s(e)}},"Edit"))}))},E=(n(13),function(e){var t=e.show,n=Object(r.useContext)(o),c=Object(r.useRef)();return t?a.a.createElement("div",{className:"overlay",onClick:function(){return n.modalClose()},ref:c,style:{display:"block"}}):null}),y=(n(14),function(e){var t=e.show,n=e.title,c=e.buttons,u=e.children,l=Object(r.useContext)(o);return t?a.a.createElement("div",{className:"modal"},a.a.createElement("div",{className:"modal-header"},a.a.createElement("div",{className:"model-title"},n||null),a.a.createElement("a",{href:"#close",className:"modal-close",onClick:function(){return l.modalClose()}},"\xd7")),a.a.createElement("div",{className:"modal-content"},u||null),a.a.createElement("div",{className:"modal-footer"},c||null)):null});n(15);var h=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=Object(r.useRef)(),c=Object(r.useRef)(),u=Object(r.useRef)(),m=Object(r.useRef)(),s={msg:e,title:t,year:n,runtime:c,genre:u,director:m},h=Object(r.useState)({movies:[],modal:!1}),g=Object(i.a)(h,2),k=g[0],j=g[1];Object(r.useEffect)((function(){fetch("https://www.omdbapi.com/?s=new&apikey=".concat("124af7f8")).then((function(e){return e.json()})).then((function(e){return e.Search.map((function(e){return e.Title}))})).then((function(e){return Promise.all(e.map((function(e){return fetch("https://www.omdbapi.com/?t=".concat(e,"&plot=full&apikey=").concat("124af7f8")).then((function(e){return e.json()})).then((function(e){return e}))})))})).then((function(e){j(Object(l.a)({},k,{movies:e.map((function(e){return e.Title=f(e.Title),e})),isLoaded:!0}))}))}),[]);var C=function(e){j(Object(l.a)({},k,{movie:e,modal:{active:!1}}))},N=function(e,t,n){j(Object(l.a)({},k,{modal:{active:e,content:t,buttons:n}}))},O=function(){j(Object(l.a)({},k,{modal:{active:!1}}))},x={movies:k.movies,modalClose:function(){return O()},removeMovie:function(e){return function(e){j(Object(l.a)({},k,{movies:k.movies.filter((function(t){return t.imdbID!==e}))}))}(e)},setMovie:function(e){return C(e)},setModal:function(e,t,n){return N(e,t,n)}},R=function(){var t=v(null,s),n=a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"btn btn-small btn-danger mr-1",onClick:function(){return O()}},"Cancel"),a.a.createElement("button",{className:"btn btn-small btn-primary",onClick:function(){d(k.movies,s).then((function(t){t.error?b(t.error,e):(k.movies.push(t),C(t))}))}},"Save"));N(!0,t,n)};return a.a.createElement(o.Provider,{value:x},a.a.createElement(E,{show:k.modal.active}),a.a.createElement(y,{show:k.modal.active,buttons:k.modal.buttons},k.modal.content),a.a.createElement("div",{className:"container"},a.a.createElement(p,null)),a.a.createElement("button",{className:"btn btn-flow",onClick:function(){return R()}},"+"))};u.a.render(a.a.createElement(h,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.b59ab5dd.chunk.js.map